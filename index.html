<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    const data = [
        {'ID': '1', 'PROP1': 'A', 'PROP2': 'B'},
        {'ID': '1.1', 'PROP1': 'A', 'PROP2': 'B'},
        {'ID': '1.1.1', 'PROP1': 'C', 'PROP2': 'D', 'FROM': 20150501, 'TO': 20150602},
        {'ID': '1.1.2', 'PROP1': 'A', 'PROP2': 'D', 'FROM': 20150515, 'TO': 20150615},
        {'ID': '1.1.3', 'PROP1': 'B', 'PROP2': 'C', 'FROM': 20150601, 'TO': 20150615},
        {'ID': '1.2', 'PROP1': 'A', 'PROP2': 'B', 'FROM': 20150501, 'TO': 20150615},
        {'ID': '1.3', 'PROP1': 'A', 'PROP2': 'B'},
        {'ID': '1.3.1', 'PROP1': 'C', 'PROP2': 'D', 'FROM': 20150501, 'TO': 20150602},
        {'ID': '2', 'PROP1': 'A', 'PROP2': 'B'},
        {'ID': '2.1', 'PROP1': 'A', 'PROP2': 'B'},
        {'ID': '2.3', 'PROP1': 'A', 'PROP2': 'B'},
        {'ID': '2.3.1', 'PROP1': 'C', 'PROP2': 'D', 'FROM': 20150501, 'TO': 20150602},
        {'ID': '2.1.3', 'PROP1': 'B', 'PROP2': 'C', 'FROM': 20150601, 'TO': 20150615},
        {'ID': '2.2', 'PROP1': 'A', 'PROP2': 'B', 'FROM': 20150501, 'TO': 20150615},
        {'ID': '2.1.1', 'PROP1': 'C', 'PROP2': 'D', 'FROM': 20150501, 'TO': 20150602},
        {'ID': '2.1.2', 'PROP1': 'A', 'PROP2': 'D', 'FROM': 20150515, 'TO': 20150615}
    ];

    function compare(a, b) {
        const id_array_a = a['ID'].split('.');
        const id_array_b = b['ID'].split('.');
        const max_length = Math.max(id_array_a.length, id_array_b.length);
        for (let i = 0; i < max_length; i++) {
            if (parseInt(id_array_a[i] || 0) > parseInt(id_array_b[i] || 0)) {
                return 1;
            }
            else if (parseInt(id_array_a[i] || 0) < parseInt(id_array_b[i] || 0)) {
                return -1;
            }
        }
        return 0;
    }

    function list_to_tree(list) {
        const map = {};
        const roots = [];
        for (let i = 0; i < list.length; i++) {
            map[list[i]['ID']] = i;
            list[i].children = [];
        }
        for (let i = 0; i < list.length; i++) {
            const node = list[i];
            const parentId = node['ID'].split('.').slice(0, -1).join('.');
            if (parentId.length) {
                list[map[parentId]].children.push(node);
            } else {
                roots.push(node);
            }
        }
        return roots;
    }

    // function

    console.log(data);
    data.sort(compare);
    console.log(data);
    data.reverse();
    const tree = list_to_tree(data);
    console.log(tree);
    // tree.forEach((root) => {
    // });

</script>
</body>
</html>